Sobre el concepto de lineas y ramales en UrbanTrips
===================================================

Una linea de transporte público puede tener un recorrido principal en torno al cual hay pequeñas variantes. Estas son consideradas ramales dentro de una misma linea. En muchas ciudades no existen estas diferencias y cada recorrido tiene un nombre y id únicos. Pero en otras no es así. A su vez, puede darse una situación donde, por ejemplo, una persona utiliza el metro, subiendo a la estación del recorrido A y bajarse en el recorrido B, sin que ese transbordo sea identificado como transacción en la tarjeta. Por lo tanto, para imputar el destino consideramos como puntos de descenso posible todas las estaciones del metro. En este caso, el metro funcionará como una única línea y cada recorrido un ramal dentro del mismo. La diferencia fundamental es que el proceso de imputación de destinos considerará como posible punto de destino todas las estaciones de la linea y no del ramal.

También puede suceder que una linea de autobuses tenga varios ramales, pero no siempre se identifica en los datos el ramal que realmente dicho vehículo o interno recorrió. Con lo cual podría ser cualquier recorrido de cualquiera de los ramales y al imputar el destino deberiamos considerar todas las estaciones potenciales de toda esa linea de autobus. Esta forma de tratar a las líneas y ramales permite que UrbanTrips se acomode a estas situaciones particulares que cada ciudad presenta. 
 
UrbanTrips no modifica los datos originales de la linea o el ramal, con lo cual si la información del ramal es correcta, esta forma de imputar destinos no afectará el ramal de la etapa según fue declarado en el interno o vehículo por el conductor. A su vez si en una ciudad no existen ramales, simplemente se utiliza la linea para identificar cada recorrido. La existencia de ramales se informa a UrbanTrips en el archivo de configuración en el parámetro ``lineas_contienen_ramales`` ( ver :doc:`configuracion`).

Si el sistema de transporte de la ciudad tiene lineas y ramales la tabla de transacciones a utilizar necesita identificar cada etapa con ambos, siguiendo el criterio aquí desarrollado. Esto puede implicar, por ejemplo, que si al metro no se lo considera como una línea única debe escogerse un id único de linea para el metro y clasificar como ramales con un id propio a todas las variantes dentro del metro.

.
